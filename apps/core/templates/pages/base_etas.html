{% extends "base.html" %}

{% block main %}
<!-- station -->
{% for abbr, schedules in stops.items %}
<div class='row station-name-row'>
    <div class='col my-auto h-100'>
        <div data-toggle="modal" data-target="#changeStation">
            <i class="fas fa-subway icon-4x"></i> &nbsp;{{ schedules.0.station_name }}
        </div>
    </div>
</div>

<!-- modal for switching station -->
<div class="modal fade" id="changeStation" tabindex="-1" role="dialog" aria-labelledby="changeStationLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <div class="list-group list-group-flush">
                    {% for abbr, name in stations.items %}
                    <a href="/{{ abbr }}" class="list-group-item list-item-station-option list-group-item-action {% if schedules.0.station_name == name %}active{% endif %}">{{ name }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>



<!-- schedules -->
{% for schedule in schedules %}
{% ifchanged schedule.destination_name %}

<hr class='schedule-divider'/>
<div class='row schedule-row'>
    <div class='col my-auto'>
        <a data-toggle="collapse" href='#collapse-{{ schedule.destination_abbr }}' role="button" aria-expanded="false" aria-controls="collapse-{{ schedule.destination_abbr }}" class='text-reset' >
            <i class="fas fa-arrow-alt-circle-right"></i> {{ schedule.destination_name }}
        </a>
    </div>
    <div class='col-4 my-auto text-center'>
        <div class='row'>
            <div class='col'>
                <div class='arrival-minutes' {% if schedule.arrival_minutes == "Leaving" %}style='font-size:1em;'{% endif %}>
                    {{ schedule.arrival_minutes }}
                </div>
            </div>
        </div>
        <div class='row'>
            <div class='col'>
                <div class='minutes-label'>{% if schedule.arrival_minutes != "Leaving" %}minutes{% endif %}</div>
            </div>
        </div>
    </div>
</div>
{% else %}

<div class='row schedule-row-collapsed collapse' id='collapse-{{ schedule.destination_abbr }}'>
    <div class='col my-auto'>
        <a data-toggle='collapse-{{ schedule.destination_abbr }}'>
            <i class="fas fa-arrow-alt-circle-right"></i> {{ schedule.destination_name }}
        </a>
    </div>
    <div class='col-4 my-auto text-center'>
        <div class='row'>
            <div class='col'>
                <div class='arrival-minutes' {% if schedule.arrival_minutes == "Leaving" %}style='font-size:1em;'{% endif %}>
                    {{ schedule.arrival_minutes }}
                </div>
            </div>
        </div>
        <div class='row'>
            <div class='col'>
                <div class='minutes-label'>{% if schedule.arrival_minutes != "Leaving" %}minutes{% endif %}</div>
            </div>
        </div>
    </div>
</div>

{% endifchanged %}


{% endfor %}
{% endfor %}
{% endblock main %}